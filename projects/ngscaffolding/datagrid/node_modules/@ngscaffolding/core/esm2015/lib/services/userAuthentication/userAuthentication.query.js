import { Injectable } from '@angular/core';
import { Query, toBoolean } from '@datorama/akita';
import * as i0 from "@angular/core";
import * as i1 from "./userAuthentication.store";
export class UserAuthenticationQuery extends Query {
    constructor(store) {
        super(store);
        this.store = store;
        this.authenticated$ = this.select(state => state.authenticated);
        this.currentUser$ = this.select(state => state.userDetails);
    }
    isAuthenticated() {
        return toBoolean(this.getValue().authenticated);
    }
    getUserId() {
        if (this.isAuthenticated() && this.getValue().userDetails) {
            return this.getValue().userDetails.userId;
        }
        else {
            return null;
        }
    }
    getUser() {
        return this.getValue().userDetails;
    }
}
UserAuthenticationQuery.ɵfac = function UserAuthenticationQuery_Factory(t) { return new (t || UserAuthenticationQuery)(i0.ɵɵinject(i1.AuthenticationStore)); };
UserAuthenticationQuery.ɵprov = i0.ɵɵdefineInjectable({ token: UserAuthenticationQuery, factory: UserAuthenticationQuery.ɵfac, providedIn: 'root' });
/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(UserAuthenticationQuery, [{
        type: Injectable,
        args: [{
                providedIn: 'root'
            }]
    }], function () { return [{ type: i1.AuthenticationStore }]; }, null); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXNlckF1dGhlbnRpY2F0aW9uLnF1ZXJ5LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uL3Byb2plY3RzL25nc2NhZmZvbGRpbmcvY29yZS9zcmMvIiwic291cmNlcyI6WyJsaWIvc2VydmljZXMvdXNlckF1dGhlbnRpY2F0aW9uL3VzZXJBdXRoZW50aWNhdGlvbi5xdWVyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0saUJBQWlCLENBQUM7OztBQU9uRCxNQUFNLE9BQU8sdUJBQXdCLFNBQVEsS0FBMEI7SUFJbkUsWUFBc0IsS0FBMEI7UUFDNUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBREssVUFBSyxHQUFMLEtBQUssQ0FBcUI7UUFIaEQsbUJBQWMsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzNELGlCQUFZLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxXQUFXLENBQUMsQ0FBQztJQUl2RCxDQUFDO0lBRUQsZUFBZTtRQUNYLE9BQU8sU0FBUyxDQUFDLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUNwRCxDQUFDO0lBRUQsU0FBUztRQUNMLElBQUksSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQyxXQUFXLEVBQUU7WUFDdkQsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQztTQUM3QzthQUFNO1lBQ0gsT0FBTyxJQUFJLENBQUM7U0FDZjtJQUNMLENBQUM7SUFFRCxPQUFPO1FBQ0gsT0FBTyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUMsV0FBVyxDQUFDO0lBQ3ZDLENBQUM7OzhGQXRCUSx1QkFBdUI7K0RBQXZCLHVCQUF1QixXQUF2Qix1QkFBdUIsbUJBRnBCLE1BQU07a0RBRVQsdUJBQXVCO2NBSG5DLFVBQVU7ZUFBQztnQkFDUixVQUFVLEVBQUUsTUFBTTthQUNyQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgUXVlcnksIHRvQm9vbGVhbiB9IGZyb20gJ0BkYXRvcmFtYS9ha2l0YSc7XHJcbmltcG9ydCB7IEJhc2ljVXNlciB9IGZyb20gJ0BuZ3NjYWZmb2xkaW5nL21vZGVscyc7XHJcbmltcG9ydCB7IEF1dGhlbnRpY2F0aW9uU3RvcmUsIEF1dGhlbnRpY2F0aW9uU3RhdGUgfSBmcm9tICcuL3VzZXJBdXRoZW50aWNhdGlvbi5zdG9yZSc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIFVzZXJBdXRoZW50aWNhdGlvblF1ZXJ5IGV4dGVuZHMgUXVlcnk8QXV0aGVudGljYXRpb25TdGF0ZT4ge1xyXG4gICAgYXV0aGVudGljYXRlZCQgPSB0aGlzLnNlbGVjdChzdGF0ZSA9PiBzdGF0ZS5hdXRoZW50aWNhdGVkKTtcclxuICAgIGN1cnJlbnRVc2VyJCA9IHRoaXMuc2VsZWN0KHN0YXRlID0+IHN0YXRlLnVzZXJEZXRhaWxzKTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgc3RvcmU6IEF1dGhlbnRpY2F0aW9uU3RvcmUpIHtcclxuICAgICAgICBzdXBlcihzdG9yZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaXNBdXRoZW50aWNhdGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0b0Jvb2xlYW4odGhpcy5nZXRWYWx1ZSgpLmF1dGhlbnRpY2F0ZWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXJJZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSAmJiB0aGlzLmdldFZhbHVlKCkudXNlckRldGFpbHMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWUoKS51c2VyRGV0YWlscy51c2VySWQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldFVzZXIoKTogQmFzaWNVc2VyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRWYWx1ZSgpLnVzZXJEZXRhaWxzO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==