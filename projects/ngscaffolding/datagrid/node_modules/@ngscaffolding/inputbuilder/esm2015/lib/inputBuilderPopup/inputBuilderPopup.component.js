import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';
import { fromEvent } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "primeng/dialog";
import * as i2 from "primeng/api";
import * as i3 from "@angular/common";
import * as i4 from "../inputBuilder/inputBuilder.component";
function InputBuilderPopupComponent_ngs_input_builder_5_Template(rf, ctx) { if (rf & 1) {
    const _r3 = i0.ɵɵgetCurrentView();
    i0.ɵɵelementStart(0, "ngs-input-builder", 4);
    i0.ɵɵlistener("modelUpdated", function InputBuilderPopupComponent_ngs_input_builder_5_Template_ngs_input_builder_modelUpdated_0_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r2 = i0.ɵɵnextContext(); return ctx_r2.notifyChanged($event); })("okClicked", function InputBuilderPopupComponent_ngs_input_builder_5_Template_ngs_input_builder_okClicked_0_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r4 = i0.ɵɵnextContext(); return ctx_r4.onOkClicked($event); })("cancelClicked", function InputBuilderPopupComponent_ngs_input_builder_5_Template_ngs_input_builder_cancelClicked_0_listener() { i0.ɵɵrestoreView(_r3); const ctx_r5 = i0.ɵɵnextContext(); return ctx_r5.onCancelClicked(); })("modelUpdated", function InputBuilderPopupComponent_ngs_input_builder_5_Template_ngs_input_builder_modelUpdated_0_listener($event) { i0.ɵɵrestoreView(_r3); const ctx_r6 = i0.ɵɵnextContext(); return ctx_r6.onModelUpdated($event); })("valueUpdated", function InputBuilderPopupComponent_ngs_input_builder_5_Template_ngs_input_builder_valueUpdated_0_listener() { i0.ɵɵrestoreView(_r3); const ctx_r7 = i0.ɵɵnextContext(); return ctx_r7.onValueUpdated(); });
    i0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = i0.ɵɵnextContext();
    i0.ɵɵproperty("inputBuilderDefinition", ctx_r1.inputBuilderDefinition)("inputModel", ctx_r1.inputModel);
} }
export class InputBuilderPopupComponent {
    constructor(changeDetector) {
        this.changeDetector = changeDetector;
        this.modelUpdated = new EventEmitter();
        this.valueUpdated = new EventEmitter();
        this.okClicked = new EventEmitter();
        this.cancelClicked = new EventEmitter();
        this.styleValues = {
            overflow: 'visible'
        };
        this.mouseSubscription = fromEvent(document.body, 'mousemove').subscribe(e => {
            if (this.attachMouseClick) {
                this.screenWidth = window.innerWidth;
                this.mouseY = e['pageY'];
                this.mouseX = e['pageX'];
                if (this.setWidth) {
                    if (this.mouseX + this.setWidth > this.screenWidth) {
                        this.setLeft = this.mouseX - this.setWidth;
                    }
                    else {
                        this.setLeft = this.mouseX;
                    }
                    this.setTop = this.mouseY;
                }
                else {
                    this.setLeft = this.mouseX;
                    this.setTop = this.mouseY;
                }
                if (!this.isShown) {
                    const newStyle = { overflow: 'visible', position: 'absolute' };
                    newStyle.top = `${this.setTop}px`;
                    newStyle.left = `${this.setLeft}px`;
                    this.styleValues = newStyle;
                    this.changeDetector.detectChanges();
                }
            }
        });
    }
    showPopup() {
        this.isShown = true;
        this.changeDetector.markForCheck();
    }
    ngOnDestroy() {
        if (this.mouseSubscription) {
            this.mouseSubscription.unsubscribe();
        }
    }
    notifyChanged(event) { }
    onModelUpdated(model) {
        this.modelUpdated.emit(model);
    }
    onValueUpdated() { }
    onOkClicked(model) {
        this.okClicked.emit(model);
    }
    onCancelClicked() {
        this.cancelClicked.emit(null);
        this.isShown = false;
        this.changeDetector.markForCheck();
    }
}
InputBuilderPopupComponent.ɵfac = function InputBuilderPopupComponent_Factory(t) { return new (t || InputBuilderPopupComponent)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef)); };
InputBuilderPopupComponent.ɵcmp = i0.ɵɵdefineComponent({ type: InputBuilderPopupComponent, selectors: [["ngs-input-builder-popup"]], inputs: { inputBuilderDefinition: "inputBuilderDefinition", attachMouseClick: "attachMouseClick", inputModel: "inputModel", setWidth: "setWidth", setTop: "setTop", setLeft: "setLeft" }, outputs: { modelUpdated: "modelUpdated", valueUpdated: "valueUpdated", okClicked: "okClicked", cancelClicked: "cancelClicked" }, decls: 6, vars: 7, consts: [[3, "visible", "visibleChange"], [1, "ui-fluid"], ["popupContainer", ""], [3, "inputBuilderDefinition", "inputModel", "modelUpdated", "okClicked", "cancelClicked", "valueUpdated", 4, "ngIf"], [3, "inputBuilderDefinition", "inputModel", "modelUpdated", "okClicked", "cancelClicked", "valueUpdated"]], template: function InputBuilderPopupComponent_Template(rf, ctx) { if (rf & 1) {
        i0.ɵɵelementStart(0, "p-dialog", 0);
        i0.ɵɵlistener("visibleChange", function InputBuilderPopupComponent_Template_p_dialog_visibleChange_0_listener($event) { return ctx.isShown = $event; });
        i0.ɵɵelementStart(1, "p-header");
        i0.ɵɵtext(2);
        i0.ɵɵelementEnd();
        i0.ɵɵelementStart(3, "div", 1, 2);
        i0.ɵɵtemplate(5, InputBuilderPopupComponent_ngs_input_builder_5_Template, 1, 2, "ngs-input-builder", 3);
        i0.ɵɵelementEnd();
        i0.ɵɵelementEnd();
    } if (rf & 2) {
        i0.ɵɵstyleMap(ctx.styleValues);
        i0.ɵɵproperty("visible", ctx.isShown);
        i0.ɵɵadvance(2);
        i0.ɵɵtextInterpolate1(" ", ctx.inputBuilderDefinition == null ? null : ctx.inputBuilderDefinition.title, " ");
        i0.ɵɵadvance(1);
        i0.ɵɵstyleProp("width", ctx.setWidth, "px");
        i0.ɵɵadvance(2);
        i0.ɵɵproperty("ngIf", ctx.isShown);
    } }, directives: [i1.Dialog, i2.Header, i3.NgIf, i4.InputBuilderComponent], styles: [""], changeDetection: 0 });
/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(InputBuilderPopupComponent, [{
        type: Component,
        args: [{
                selector: 'ngs-input-builder-popup',
                templateUrl: 'inputBuilderPopup.component.html',
                styleUrls: ['inputBuilderPopup.component.scss'],
                changeDetection: ChangeDetectionStrategy.OnPush
            }]
    }], function () { return [{ type: i0.ChangeDetectorRef }]; }, { inputBuilderDefinition: [{
            type: Input
        }], attachMouseClick: [{
            type: Input
        }], inputModel: [{
            type: Input
        }], setWidth: [{
            type: Input
        }], setTop: [{
            type: Input
        }], setLeft: [{
            type: Input
        }], modelUpdated: [{
            type: Output
        }], valueUpdated: [{
            type: Output
        }], okClicked: [{
            type: Output
        }], cancelClicked: [{
            type: Output
        }] }); })();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRCdWlsZGVyUG9wdXAuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Ii4uLy4uLy4uLy4uL3Byb2plY3RzL25nc2NhZmZvbGRpbmcvaW5wdXRidWlsZGVyL3NyYy8iLCJzb3VyY2VzIjpbImxpYi9pbnB1dEJ1aWxkZXJQb3B1cC9pbnB1dEJ1aWxkZXJQb3B1cC5jb21wb25lbnQudHMiLCJsaWIvaW5wdXRCdWlsZGVyUG9wdXAvaW5wdXRCdWlsZGVyUG9wdXAuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBYSx1QkFBdUIsRUFBcUIsTUFBTSxlQUFlLENBQUM7QUFDOUgsT0FBTyxFQUFFLFNBQVMsRUFBZ0IsTUFBTSxNQUFNLENBQUM7Ozs7Ozs7O0lDSXZDLDRDQVNDO0lBUEcsb1BBQXNDLCtOQUFBLCtOQUFBLHdPQUFBLDROQUFBO0lBT3pDLGlCQUFvQjs7O0lBRmpCLHNFQUFpRCxpQ0FBQTs7QURGN0QsTUFBTSxPQUFPLDBCQUEwQjtJQXFCbkMsWUFBb0IsY0FBaUM7UUFBakMsbUJBQWMsR0FBZCxjQUFjLENBQW1CO1FBYjNDLGlCQUFZLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUN2QyxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUFpQixDQUFDO1FBRWpELGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3BDLGtCQUFhLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQXlDbEQsZ0JBQVcsR0FBRztZQUNWLFFBQVEsRUFBRSxTQUFTO1NBQ3RCLENBQUM7UUFqQ0UsSUFBSSxDQUFDLGlCQUFpQixHQUFHLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN6RSxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtnQkFDdkIsSUFBSSxDQUFDLFdB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TUFBTTthQUNsRDtvRUFFWSxzQkFBc0I7a0JBQTlCLEtBQUs7WUFDRyxnQkFBZ0I7a0JBQXhCLEtBQUs7WUFDRyxVQUFVO2tCQUFsQixLQUFLO1lBQ0csUUFBUTtrQkFBaEIsS0FBSztZQUNHLE1BQU07a0JBQWQsS0FBSztZQUNHLE9BQU87a0JBQWYsS0FBSztZQUVJLFlBQVk7a0JBQXJCLE1BQU07WUFDRyxZQUFZO2tCQUFyQixNQUFNO1lBRUcsU0FBUztrQkFBbEIsTUFBTTtZQUNHLGFBQWE7a0JBQXRCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIElucHV0LCBPdXRwdXQsIEV2ZW50RW1pdHRlciwgT25EZXN0cm95LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgQ2hhbmdlRGV0ZWN0b3JSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgZnJvbUV2ZW50LCBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgSW5wdXRCdWlsZGVyRGVmaW5pdGlvbiB9IGZyb20gJ0BuZ3NjYWZmb2xkaW5nL21vZGVscyc7XHJcblxyXG5AQ29tcG9uZW50KHtcclxuICAgIHNlbGVjdG9yOiAnbmdzLWlucHV0LWJ1aWxkZXItcG9wdXAnLFxyXG4gICAgdGVtcGxhdGVVcmw6ICdpbnB1dEJ1aWxkZXJQb3B1cC5jb21wb25lbnQuaHRtbCcsXHJcbiAgICBzdHlsZVVybHM6IFsnaW5wdXRCdWlsZGVyUG9wdXAuY29tcG9uZW50LnNjc3MnXSxcclxuICAgIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoXHJcbn0pXHJcbmV4cG9ydCBjbGFzcyBJbnB1dEJ1aWxkZXJQb3B1cENvbXBvbmVudCBpbXBsZW1lbnRzIE9uRGVzdHJveSB7XHJcbiAgICBASW5wdXQoKSBpbnB1dEJ1aWxkZXJEZWZpbml0aW9uOiBJbnB1dEJ1aWxkZXJEZWZpbml0aW9uO1xyXG4gICAgQElucHV0KCkgYXR0YWNoTW91c2VDbGljazogYm9vbGVhbjtcclxuICAgIEBJbnB1dCgpIGlucHV0TW9kZWw6IGFueTtcclxuICAgIEBJbnB1dCgpIHNldFdpZHRoOiBudW1iZXI7XHJcbiAgICBASW5wdXQoKSBzZXRUb3A6IG51bWJlcjtcclxuICAgIEBJbnB1dCgpIHNldExlZnQ6IG51bWJlcjtcclxuXHJcbiAgICBAT3V0cHV0KCkgbW9kZWxVcGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcbiAgICBAT3V0cHV0KCkgdmFsdWVVcGRhdGVkID0gbmV3IEV2ZW50RW1pdHRlcjxbc3RyaW5nLCBhbnldPigpO1xyXG5cclxuICAgIEBPdXRwdXQoKSBva0NsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuICAgIEBPdXRwdXQoKSBjYW5jZWxDbGlja2VkID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gICAgaXNTaG93bjogYm9vbGVhbjtcclxuXHJcbiAgICBwcml2YXRlIG1vdXNlU3Vic2NyaXB0aW9uOiBTdWJzY3JpcHRpb247XHJcbiAgICBwcml2YXRlIG1vdXNlWDogbnVtYmVyO1xyXG4gICAgcHJpdmF0ZSBtb3VzZVk6IG51bWJlcjtcclxuICAgIHByaXZhdGUgc2NyZWVuV2lkdGg6IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNoYW5nZURldGVjdG9yOiBDaGFuZ2VEZXRlY3RvclJlZikge1xyXG4gICAgICAgIHRoaXMubW91c2VTdWJzY3JpcHRpb24gPSBmcm9tRXZlbnQoZG9jdW1lbnQuYm9keSwgJ21vdXNlbW92ZScpLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXR0YWNoTW91c2VDbGljaykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZVkgPSBlWydwYWdlWSddO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3VzZVggPSBlWydwYWdlWCddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2V0V2lkdGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tb3VzZVggKyB0aGlzLnNldFdpZHRoID4gdGhpcy5zY3JlZW5XaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExlZnQgPSB0aGlzLm1vdXNlWCAtIHRoaXMuc2V0V2lkdGg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMZWZ0ID0gdGhpcy5tb3VzZVg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VG9wID0gdGhpcy5tb3VzZVk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TGVmdCA9IHRoaXMubW91c2VYO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VG9wID0gdGhpcy5tb3VzZVk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmlzU2hvd24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdHlsZTogYW55ID0geyBvdmVyZmxvdzogJ3Zpc2libGUnLCBwb3NpdGlvbjogJ2Fic29sdXRlJyB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBuZXdTdHlsZS50b3AgPSBgJHt0aGlzLnNldFRvcH1weGA7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3U3R5bGUubGVmdCA9IGAke3RoaXMuc2V0TGVmdH1weGA7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGVWYWx1ZXMgPSBuZXdTdHlsZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdHlsZVZhbHVlcyA9IHtcclxuICAgICAgICBvdmVyZmxvdzogJ3Zpc2libGUnXHJcbiAgICB9O1xyXG5cclxuICAgIHNob3dQb3B1cCgpIHtcclxuICAgICAgICB0aGlzLmlzU2hvd24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3IubWFya0ZvckNoZWNrKCk7XHJcbiAgICB9XHJcblxyXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICAgICAgaWYgKHRoaXMubW91c2VTdWJzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5tb3VzZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBub3RpZnlDaGFuZ2VkKGV2ZW50OiBhbnkpIHt9XHJcblxyXG4gICAgb25Nb2RlbFVwZGF0ZWQobW9kZWw6IGFueSkge1xyXG4gICAgICAgIHRoaXMubW9kZWxVcGRhdGVkLmVtaXQobW9kZWwpO1xyXG4gICAgfVxyXG5cclxuICAgIG9uVmFsdWVVcGRhdGVkKCkge31cclxuXHJcbiAgICBvbk9rQ2xpY2tlZChtb2RlbDogYW55KSB7XHJcbiAgICAgICAgdGhpcy5va0NsaWNrZWQuZW1pdChtb2RlbCk7XHJcbiAgICB9XHJcbiAgICBvbkNhbmNlbENsaWNrZWQoKSB7XHJcbiAgICAgICAgdGhpcy5jYW5jZWxDbGlja2VkLmVtaXQobnVsbCk7XHJcbiAgICAgICAgdGhpcy5pc1Nob3duID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5tYXJrRm9yQ2hlY2soKTtcclxuICAgIH1cclxufVxyXG4iLCI8cC1kaWFsb2cgWyh2aXNpYmxlKV09XCJpc1Nob3duXCIgW3N0eWxlXT1cInN0eWxlVmFsdWVzXCI+XHJcbiAgICA8cC1oZWFkZXI+XHJcbiAgICAgICAge3sgaW5wdXRCdWlsZGVyRGVmaW5pdGlvbj8udGl0bGUgfX1cclxuICAgIDwvcC1oZWFkZXI+XHJcbiAgICA8ZGl2IGNsYXNzPVwidWktZmx1aWRcIiAjcG9wdXBDb250YWluZXIgW3N0eWxlLndpZHRoLnB4XT1cInNldFdpZHRoXCI+XHJcbiAgICAgICAgPG5ncy1pbnB1dC1idWlsZGVyXHJcbiAgICAgICAgICAgICpuZ0lmPVwiaXNTaG93blwiXHJcbiAgICAgICAgICAgIChtb2RlbFVwZGF0ZWQpPVwibm90aWZ5Q2hhbmdlZCgkZXZlbnQpXCJcclxuICAgICAgICAgICAgKG9rQ2xpY2tlZCk9XCJvbk9rQ2xpY2tlZCgkZXZlbnQpXCJcclxuICAgICAgICAgICAgKGNhbmNlbENsaWNrZWQpPVwib25DYW5jZWxDbGlja2VkKClcIlxyXG4gICAgICAgICAgICAobW9kZWxVcGRhdGVkKT1cIm9uTW9kZWxVcGRhdGVkKCRldmVudClcIlxyXG4gICAgICAgICAgICAodmFsdWVVcGRhdGVkKT1cIm9uVmFsdWVVcGRhdGVkKClcIlxyXG4gICAgICAgICAgICBbaW5wdXRCdWlsZGVyRGVmaW5pdGlvbl09XCJpbnB1dEJ1aWxkZXJEZWZpbml0aW9uXCJcclxuICAgICAgICAgICAgW2lucHV0TW9kZWxdPVwiaW5wdXRNb2RlbFwiXHJcbiAgICAgICAgPjwvbmdzLWlucHV0LWJ1aWxkZXI+XHJcbiAgICA8L2Rpdj5cclxuPC9wLWRpYWxvZz5cclxuIl19